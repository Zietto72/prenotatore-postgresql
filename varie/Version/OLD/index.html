
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Teatro Booking con Modali</title>
 <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Seleziona un posto</h1>

  <div id="svgContainer">
    <!-- ðŸ”» INCOLLA QUI LA TUA CARTINA SVG ðŸ”» -->

<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" id="Livello_1" version="1.1" viewBox="0 0 205.7 258.4">
  <!-- Generator: Adobe Illustrator 29.4.0, SVG Export Plug-In . SVG Version: 2.1.0 Build 152)  -->
  <defs>
    <style>
      .st0 {
        fill: #e5241e;
      }

      .st0, .st1, .st2 {
        isolation: isolate;
      }

      .st0, .st2 {
        font-family: MyriadPro-Black, 'Myriad Pro';
        font-size: 4.9px;
        font-weight: 800;
      }

      .st2 {
        fill: #1d1d1b;
      }

      .st3 {
        fill: #b7b6b6;
        stroke-width: .5px;
      }

      .st3, .st4 {
        stroke: #1d1d1b;
        stroke-miterlimit: 10;
      }

      .st4 {
        fill: #fff;
        stroke-width: .3px;
      }
      
        .posto:hover {
    fill: #9be099;
    cursor: pointer;
  }
    </style>
  </defs>
  <g id="PLATEA">
    <g id="FILA_C">
      <g id="C12">
        <rect class="posto posto st4" data-posto="C12" x="173.8" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(176.2 112.6)"><tspan x="0" y="0">12</tspan></text>
        </g>
      <g id="C11">
        <rect class="posto posto st4" data-posto="C11" x="160.4" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(163 112.6)"><tspan x="0" y="0">11</tspan></text>
        </g>
      <g id="C10">
        <rect class="posto posto st4" data-posto="C10" x="147" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(149.7 112.6)"><tspan x="0" y="0">10</tspan></text>
        </g>
      <g id="C9">
        <rect class="posto posto st4" data-posto="C9" x="133.7" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(137.7 112.6)"><tspan x="0" y="0">9</tspan></text>
        </g>
      <g id="C8">
        <rect class="posto posto st4" data-posto="C8" x="120.3" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(124.3 112.6)"><tspan x="0" y="0">8</tspan></text>
        </g>
      <g id="C7">
        <rect class="posto posto st4" data-posto="C7" x="107" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(110.9 112.6)"><tspan x="0" y="0">7</tspan></text>
        </g>
      <g id="C6">
        <rect class="posto posto st4" data-posto="C6" x="93.6" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(97.6 112.6)"><tspan x="0" y="0">6</tspan></text>
        </g>
      <g id="C5">
        <rect class="posto posto st4" data-posto="C5" x="80.2" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(84.2 112.6)"><tspan x="0" y="0">5</tspan></text>
        </g>
      <g id="C4">
        <rect class="posto posto st4" data-posto="C4" x="66.7" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(70.7 112.6)"><tspan x="0" y="0">4</tspan></text>
        </g>
      <g id="C3">
        <rect class="posto posto st4" data-posto="C3" x="53.3" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(57.3 112.6)"><tspan x="0" y="0">3</tspan></text>
        </g>
      <g id="C2">
        <rect class="posto posto st4" data-posto="C2" x="40" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(43.9 112.6)"><tspan x="0" y="0">2</tspan></text>
        </g>
      <g id="C1">
        <rect class="posto posto st4" data-posto="C1" x="26.6" y="106" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(30.6 112.6)"><tspan x="0" y="0">1</tspan></text>
        </g>
    </g>
    <g id="FILA_B">
      <g id="B12">
        <rect class="posto posto st4" data-posto="B12" x="173.8" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(176.2 98.2)"><tspan x="0" y="0">12</tspan></text>
        </g>
      <g id="B11">
        <rect class="posto posto st4" data-posto="B11" x="160.4" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(163 98.2)"><tspan x="0" y="0">11</tspan></text>
        </g>
      <g id="B10">
        <rect class="posto posto st4" data-posto="B10" x="147" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(149.7 98.2)"><tspan x="0" y="0">10</tspan></text>
        </g>
      <g id="B9">
        <rect class="posto posto st4" data-posto="B9" x="133.7" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(137.7 98.2)"><tspan x="0" y="0">9</tspan></text>
        </g>
      <g id="B8">
        <rect class="posto posto st4" data-posto="B8" x="120.3" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(124.3 98.2)"><tspan x="0" y="0">8</tspan></text>
        </g>
      <g id="B7">
        <rect class="posto posto st4" data-posto="B7" x="107" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(110.9 98.2)"><tspan x="0" y="0">7</tspan></text>
        </g>
      <g id="B6">
        <rect class="posto posto st4" data-posto="B6" x="93.6" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(97.6 98.2)"><tspan x="0" y="0">6</tspan></text>
        </g>
      <g id="B5">
        <rect class="posto posto st4" data-posto="B5" x="80.2" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(84.2 98.2)"><tspan x="0" y="0">5</tspan></text>
        </g>
      <g id="B4">
        <rect class="posto posto st4" data-posto="B4" x="66.7" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(70.7 98.2)"><tspan x="0" y="0">4</tspan></text>
        </g>
      <g id="B3">
        <rect class="posto posto st4" data-posto="B3" x="53.3" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(57.3 98.2)"><tspan x="0" y="0">3</tspan></text>
        </g>
      <g id="B2">
        <rect class="posto posto st4" data-posto="B2" x="40" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(43.9 98.2)"><tspan x="0" y="0">2</tspan></text>
        </g>
      <g id="B1">
        <rect class="posto posto st4" data-posto="B1" x="26.6" y="91.6" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(30.6 98.2)"><tspan x="0" y="0">1</tspan></text>
        </g>
    </g>
    <g id="FILA_A">
      <g id="A12">
        <rect class="posto posto st4" data-posto="A12" x="173.8" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(176.2 83.3)"><tspan x="0" y="0">12</tspan></text>
        </g>
      <g id="A11">
        <rect class="posto posto st4" data-posto="A11" x="160.4" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(163 83.3)"><tspan x="0" y="0">11</tspan></text>
        </g>
      <g id="A10">
        <rect class="posto posto st4" data-posto="A10" x="147" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(149.7 83.3)"><tspan x="0" y="0">10</tspan></text>
        </g>
      <g id="A9">
        <rect class="posto posto st4" data-posto="A9" x="133.7" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(137.7 83.3)"><tspan x="0" y="0">9</tspan></text>
        </g>
      <g id="A8">
        <rect class="posto posto st4" data-posto="A8" x="120.3" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(124.3 83.3)"><tspan x="0" y="0">8</tspan></text>
        </g>
      <g id="A7">
        <rect class="posto posto st4" data-posto="A7" x="107" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(110.9 83.3)"><tspan x="0" y="0">7</tspan></text>
        </g>
      <g id="A6">
        <rect class="posto posto st4" data-posto="A6" x="93.6" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(97.6 83.3)"><tspan x="0" y="0">6</tspan></text>
        </g>
      <g id="A5">
        <rect class="posto posto st4" data-posto="A5" x="80.2" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(84.2 83.3)"><tspan x="0" y="0">5</tspan></text>
        </g>
      <g id="A4">
        <rect class="posto posto st4" data-posto="A4" x="66.7" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
<text class="st2" transform="translate(70.7 83.3)"><tspan x="0" y="0">4</tspan></text>
        </g>
      <g id="A3">
        <rect class="posto posto st4" data-posto="A3" x="53.3" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
        <g class="st1">
          <text class="st2" transform="translate(57.3 83.3)"><tspan x="0" y="0">3</tspan></text>
        </g>
      </g>
      <g id="A2">
        <rect class="posto posto st4" data-posto="A2" x="40" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
        <g class="st1">
          <text class="st2" transform="translate(43.9 83.3)"><tspan x="0" y="0">2</tspan></text>
        </g>
      </g>
      <g id="A1">
        <rect class="posto posto st4" data-posto="A1" x="26.6" y="76.7" width="10.6" height="10.6" rx="2.1" ry="2.1"/>
        <g class="st1">
          <text class="st2" transform="translate(30.6 83.3)"><tspan x="0" y="0">1</tspan></text>
        </g>
      </g>
    </g>
  </g>
  <g id="varie">
    <rect class="posto posto st3" data-posto="varie" id="PALCO" x="56.3" y="22.7" width="101.3" height="40.2"/>
<text class="st0" transform="translate(21.2 99)"><tspan x="0" y="0">B</tspan></text>
<text class="st0" transform="translate(21.2 113.4)"><tspan x="0" y="0">C</tspan></text>
<text class="st0" transform="translate(21.2 83.3)"><tspan x="0" y="0">A</tspan></text>
  </g>
</svg>

  </div>

  <p>Posti selezionati: <span id="selectedSeats">0</span> â€“ Totale: <span id="totalAmountModal">0.00</span> â‚¬</p>
  <button id="bookButton" disabled>Prenota</button>

 <!-- Estratto aggiornato solo con modale Prenotatore migliorata -->
<!-- Estratto aggiornato solo con modale Prenotatore migliorata -->
<!-- MODALE 1: Prenotatore -->
<div id="prenotatoreModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="chiudiModale()">&times;</button>
    <h2>Dati del Prenotatore</h2>
    <form>
      <div class="form-group">
        <label for="prenotatoreNome">Nome e Cognome</label>
        <input type="text" id="prenotatoreNome" placeholder="Mario Rossi" required>
      </div>

      <div class="form-group">
        <label for="prenotatoreEmail">Email</label>
        <input type="email" id="prenotatoreEmail" placeholder="email@example.com" required>
      </div>

      <div class="form-group">
        <label for="prenotatoreTelefono">Telefono</label>
        <input type="tel" id="prenotatoreTelefono" placeholder="1234567890" required>
      </div>

      <div class="button-group">
        <button type="button" onclick="controllaPrenotatore()">Continua</button>
      </div>
    </form>
  </div>
</div>

<!-- MODALE 2: Spettatori (migliorata) -->
<div id="spettatoriModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="chiudiModale()">&times;</button>
    <h2>Nome degli Spettatori</h2>
    <div id="spettatoriInput" class="form-group"></div>
    <div class="button-group">
      <button onclick="apriRiepilogo()">Riepilogo</button>
    </div>
  </div>
</div>

<!-- MODALE 3: Riepilogo (migliorata) -->
<div id="riepilogoModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="chiudiModale()">&times;</button>
    <h2>Riepilogo Prenotazione</h2>
    <div id="riepilogoContenuto"></div>
    <div class="button-group">
      <button onclick="procediPagamento()">Conferma e Invia</button>
    </div>
  </div>
</div>

<script>
  function chiudiModale() {
    document.querySelectorAll('.modal').forEach(modale => {
      modale.style.display = 'none';
    });
  }
</script>



  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const selectedSeats = [];
      let prenotatoreData = {};

      document.querySelectorAll('rect.posto').forEach(rect => {
        const gruppo = rect.closest('g');
        const seatId = gruppo?.id;

        rect.addEventListener('click', () => {
          const index = selectedSeats.findIndex(s => s.id === seatId);

          if (index !== -1) {
            selectedSeats.splice(index, 1);
            rect.style.fill = rect.dataset.originalColor || '';
          } else {
            rect.dataset.originalColor = getComputedStyle(rect).fill;
            rect.style.fill = '#6c7ae0';
            selectedSeats.push({ id: seatId, label: seatId });
          }

          document.getElementById('selectedSeats').textContent = selectedSeats.length;
          document.getElementById('totalAmountModal').textContent = (selectedSeats.length * 7.5).toFixed(2);
          document.getElementById('bookButton').disabled = selectedSeats.length === 0;
        });
      });

      document.getElementById('bookButton').addEventListener('click', () => {
        document.getElementById('prenotatoreModal').style.display = 'block';
      });

      window.controllaPrenotatore = function () {
        prenotatoreData.nome = document.getElementById('prenotatoreNome').value;
        prenotatoreData.email = document.getElementById('prenotatoreEmail').value;
        prenotatoreData.telefono = document.getElementById('prenotatoreTelefono').value;

        if (prenotatoreData.nome && prenotatoreData.email && prenotatoreData.telefono) {
          document.getElementById('prenotatoreModal').style.display = 'none';
          mostraInputSpettatori();
        } else {
          alert('Compila tutti i campi.');
        }
      };

      function mostraInputSpettatori() {
        const container = document.getElementById('spettatoriInput');
        container.innerHTML = '';
        selectedSeats.forEach(seat => {
          container.innerHTML += `<label>Posto ${seat.label}: </label><input type="text" id="spettatore-${seat.id}" required><br>`;
        });
        document.getElementById('spettatoriModal').style.display = 'block';
      }

      window.apriRiepilogo = function () {
        let contenuto = '';
        selectedSeats.forEach(seat => {
          const nome = document.getElementById('spettatore-' + seat.id).value;
          contenuto += `<b>${seat.label}</b>: ${nome}<br>`;
        });

        document.getElementById('riepilogoContenuto').innerHTML = `
          <p><b>Prenotatore:</b> ${prenotatoreData.nome}</p>
          <p><b>Email:</b> ${prenotatoreData.email}</p>
          <p><b>Telefono:</b> ${prenotatoreData.telefono}</p><hr>
          <p>${contenuto}</p>
        `;

        document.getElementById('spettatoriModal').style.display = 'none';
        document.getElementById('riepilogoModal').style.display = 'block';
      };

      window.procediPagamento = function () {
        const prenotatore = prenotatoreData.nome;
        const email = prenotatoreData.email;
        const telefono = prenotatoreData.telefono;
        const spettatori = selectedSeats.map(seat => {
          return {
            posto: seat.label,
            nome: document.getElementById('spettatore-' + seat.id).value
          };
        });

        const datiPrenotazione = {
          prenotatore,
          email,
          telefono,
          spettatori,
          totale: selectedSeats.length * 7.5
        };

        inviaEmailConferma(datiPrenotazione);
      };
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script src="script.js"></script>
<div id="messaggioConferma" style="
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #28a745;
  color: white;
  padding: 30px 40px;
  border-radius: 16px;
  font-size: 22px;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
  text-align: center;
  z-index: 1000;
">
  <p style="margin-bottom: 20px;">
    âœ… Prenotazione confermata!<br>Controlla tua email per verificare se hai ricevuto i PDF della tua prenotazione.<br> Se non la trovi controlla nella SPAM.
  </p>
  <button onclick="chiudiMessaggioConferma()" style="
    padding: 10px 20px;
    font-size: 18px;
    background-color: white;
    color: #28a745;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  ">
    OK
  </button>
</div>
</body>
</html>
